"use strict";angular.module("cms.directives",[]).directive("appVersion",["version",function(e){return function(n,t){t.text(e)}}]).directive("articleUrlName",[function(){return{restrict:"A",link:function(e,n,t){var c=function(e){if(!e)return"";var n=e,t=n.replace(/[\x7f-\xff]/g,"").replace(/[ \t\r\n\v\f]/g,"-");return t};e.$watch(t.ngModel,function(n){e.article&&(e.article.url_name=c(n))})}}}]).directive("pageUrlName",[function(){return{restrict:"A",link:function(e,n,t){var c=function(e){if(!e)return"";var n=e,t=n.replace(/[\x7f-\xff]/g,"").replace(/[ \t\r\n\v\f]/g,"-");return t};e.$watch(t.ngModel,function(n){e.page&&(e.page.url_name=c(n))})}}}]).directive("sameAs",function(){return{require:"ngModel",link:function(e,n,t,c){c.$parsers.unshift(function(n){e.debugModus&&(console.log("pw1: "+e[t.sameAs]),console.log("pw2: "+n));var i=n===e[t.sameAs];c.$setValidity("sameas",i)})}}}).directive("username",[function(){return{restrict:"A",link:function(e,n,t){console.log(t);var c="",i="";e.$watch("user.first_name",function(){e.user&&(c=e.user.first_name.substr(0,2).toLowerCase(),e.user.user_name=c+i)}),e.$watch("user.last_name",function(){e.user&&(i=e.user.last_name.substr(0,5).toLowerCase(),e.user.user_name=c+i)})}}}]).directive("geocode",[function(){return{restrict:"A",link:function(e,n){n.bind("keydown",function(n){(n.which>=48&&n.which<=90||n.which>=96&&n.which<=105||8===n.which||13===n.which||32===n.which)&&e.$apply(function(){e.$eval("checkTypeSpeed()")})})}}}]).directive("deleteObject",["$interval","$timeout","genService","$location",function(e,n,t,c){return{restrict:"A",link:function(i,r,o){var u,a,s=6;r.bind("click",function(){"started"===r.val()?(r.val("stopped"),e.cancel(u),i.deleteMsg="Abgebrochen",a=n(function(){i.deleteMsg="Löschen"},800)):(r.val("started"),n.cancel(a),u=e(function(e){i.deleteMsg="Abbrechen ["+(s-e-1)+"]"},1e3,s),u.then(function(){i.deleteMsg="Gelöscht",t.deleteObjectById(o.deleteObjectPath,o.deleteObjectId).then(function(){n(function(){c.path("/"+o.deleteObjectPath)},2500)})}))}),r.on("$destroy",function(){n.cancel(a),e.cancel(u)})}}}]).directive("goBack",["$interval","$timeout","genService","$location","$window",function(e,n,t,c,i){return{restrict:"A",link:function(e,n){n.bind("click",function(){e.isLocked=!e.isLocked,i.history.back()})}}}]);