"use strict";angular.module("cms.controllers").controller("userCtrl",["MenuService","genService","$scope","$timeout",function(e,r,n,u){e.update("Benutzer"),n.apiPath="users",n.deleteMsg="Löschen",n.loadingUsers=!0,r.getAllObjects("users").then(function(e){n.users=e,u(function(){n.loadingUsers=!1},300)})}]).controller("userDetailCtrl",["MenuService","genService","$scope","$routeParams","$location","$timeout","toaster",function(e,r,n,u,s,t,o){e.update("Benutzer");var a;n.apiPath="users",n.menuName="Benutzer bearbeiten",n.deleteMsg="Löschen",n.pass1="",r.getObjectById("users",u.userId).then(function(e){n.user=e}),r.getAllObjects("usergroups").then(function(e){n.allUserGroups=e}),n.saveUser=function(e){return n.pass1.length>0&&(e.plain_password=n.pass1),e.user_name.length<1?void o.pop("error",null,"Vorname und Nachname muss ausgefüllt werden"):e.email.length<1?void o.pop("error",null,"Email muss ausgefüllt werden"):(angular.isString(e.user_group)&&(e.user_group=JSON.parse(e.user_group)),n.loading=!0,void r.updateObject("users",e).then(function(){o.pop("success",null,"Benutzer wurde aktualisiert"),a=t(function(){s.path("/users"),n.loading=!1},2500)}))},n.$on("$locationChangeStart",function(){t.cancel(a)})}]).controller("userAddCtrl",["genService","MenuService","$scope","$location","$timeout","toaster",function(e,r,n,u,s,t){r.update("Benutzer");var o;n.apiPath="users",n.menuName="Benutzer hinzufügen",n.pass1="",e.getEmptyObject("user").then(function(e){n.user=e}),e.getAllObjects("usergroups").then(function(e){n.allUserGroups=e}),n.saveUser=function(r){return""===r.username?void t.pop("error",null,"Vorname und Nachname muss ausgefüllt werden"):""===r.email?void t.pop("error",null,"Email muss ausgefüllt werden"):(angular.isString(r.user_group)&&(r.user_group=JSON.parse(r.user_group)),n.loading=!0,void e.insertObject("users",r).then(function(){t.pop("success",null,"Benutzer wurde aktualisiert"),o=s(function(){u.path("/users"),n.loading=!1},2500)}))},n.$on("$locationChangeStart",function(){s.cancel(o)})}]);